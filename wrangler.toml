# Cloudflare Workers configuration for Bible MCP Server
name = "bible-mcp"
main = "src/index.ts"
compatibility_date = "2025-01-28"
compatibility_flags = ["nodejs_compat"]

# Keep workers.dev subdomain active as backup
workers_dev = true

# Enable observability for logs and analytics in Cloudflare dashboard
[observability]
enabled = true

# Custom domain (configured via Cloudflare dashboard)
# https://bible-mcp.dws-cloud.com/mcp
[[routes]]
pattern = "bible-mcp.dws-cloud.com"
custom_domain = true

# =============================================================================
# Bible API Connection
# =============================================================================
# Choose ONE of the following options:
#
# OPTION 1: Service Binding (same Cloudflare account - faster, no public HTTP)
# Use this if you're hosting both MCP and Bible API workers in your account.
# The binding name (BIBLE_API) must match the code, but "service" is YOUR worker name.
[[services]]
binding = "BIBLE_API"
service = "bible-api"  # Change this to your Bible API worker name

# OPTION 2: Public API (cross-account or using hosted API)
# Comment out the [[services]] block above and uncomment this:
# [vars]
# BIBLE_API_URL = "https://bible-api.dws-cloud.com"  # Or your own API URL
